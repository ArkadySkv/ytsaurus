package NYT.NChunkServer.NProto;

import "yt/ytlib/chunk_server/chunk_service.proto";
import "yt/ytlib/misc/guid.proto";

////////////////////////////////////////////////////////////////////////////////

message TMsgRegisterHolder
{
    required bytes address = 1;
    required NYT.NProto.TGuid incarnation_id = 2;
    required THolderStatistics statistics = 3;
}

message TMsgUnregisterHolder
{
    required int32 holder_id = 1;
}

// TODO(babenko): deprecate
message TMsgCreateChunks
{
    required NYT.NProto.TGuid transaction_id = 1;
    required int32 chunk_count = 2;
}

message TMsgFullHeartbeat
{
	required bytes request_body = 1;
	//    required int32 holder_id = 1;
    //required THolderStatistics statistics = 2;
    //repeated TChunkAddInfo chunks = 3;
}

message TMsgIncrementalHeartbeat
{
    required int32 holder_id = 1;
    required THolderStatistics statistics = 2;
    repeated TChunkAddInfo added_chunks = 3;
    repeated TChunkRemoveInfo removed_chunks = 4;
}

message TMsgUpdateJobs
{
    required int32 holder_id = 1;
    repeated TJobStartInfo started_jobs = 2;
    repeated TJobStopInfo stopped_jobs = 3;
}

////////////////////////////////////////////////////////////////////////////////

