package NYT.NQueryClient.NProto;

////////////////////////////////////////////////////////////////////////////////

message TExpression
{
    required int32 kind = 1;

    extensions 100 to max;
}

message TLiteralExpression
{
    extend TExpression {
        optional TLiteralExpression literal_expression = 107;
    }

    required uint32 type = 1;

    optional int64 int64_value = 2;
    optional uint64 uint64_value = 3;
    optional double double_value = 4;
    optional string string_value = 5;
    optional bool boolean_value = 6;
}

message TReferenceExpression
{
    extend TExpression {
        optional TReferenceExpression reference_expression = 104;
    }
    required string column_name = 1;
}

message TFunctionExpression
{
    extend TExpression {
        optional TFunctionExpression function_expression = 105;
    }
    required string function_name = 1;
    repeated TExpression arguments = 2;
}

message TBinaryOpExpression
{
    extend TExpression {
        optional TBinaryOpExpression binary_op_expression = 106;
    }
    required int32 opcode = 1; // EBinaryOp
    required TExpression lhs = 2;
    required TExpression rhs = 3;
}

////////////////////////////////////////////////////////////////////////////////

