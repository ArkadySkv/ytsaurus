package NYT.NChunkManager.NProto;

////////////////////////////////////////////////////////////////////////////////

message TChunkInfo
{
    required bytes Id = 1;
    required int64 Size = 2;
}

message THolderStatistics
{
    required int64 AvailableSpace = 1;
    required int64 UsedSpace = 2;
    required int32 ChunkCount = 3;
}

////////////////////////////////////////////////////////////////////////////////

message TReqRegisterHolder
{
    required THolderStatistics Statistics = 1;
}

message TRspRegisterHolder
{
    required int32 HolderId = 1;
}

////////////////////////////////////////////////////////////////////////////////

message TReqHolderHeartbeat
{
    required int32 HolderId = 1;

    required THolderStatistics Statistics = 2;

    repeated TChunkInfo AddedChunks = 3;
    repeated bytes RemovedChunk = 4;
}

message TRspHolderHeartbeat
{
    repeated bytes ChunksToRemove = 1;
}

////////////////////////////////////////////////////////////////////////////////
